<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steampianist - Ang Cariñosa</title>
    <link rel="stylesheet" href="bidyo.css">
    <!--link rel="shortcut icon" href="imahe/logo.png" type="image/x-icon"-->
</head>
<body>

    <div class="bar">
        <a href="talabahayan.html" class="d1">BIDYO</a>
        <a href="#" class="aa1"><img src="user.png"></a>
        <a href="#" class="a1"><b>Magpaskil</b></a>
    </div>

    <div>

        <div class="d2">
            <br><br><a class="a2">Steampianist - Ang Cariñosa</a><br><br><br>
        </div>

        <div class="main-container">
            <img src="kindpng_7456280.png" class="spin">
            <iframe src="https://www.youtube-nocookie.com/embed/viQJGUrBg3c?rel=0&modestbranding=1&autohide=1&showinfo=0" frameborder="0" allowfullscreen></iframe>
        </div>

        <div class="d2">
            <br><br><a class="a2">Mga Kategorya</a><br><br><br>
            <a href="https://www.youtube.com/c/Steampianist" class="a3">Steampianist</a>
            <a href="kategorya/vocaloid.html" class="a3">Vocaloid</a>
            <a href="kategorya/gumi.html" class="a3">Gumi</a>
            <a href="kategorya/bidyotmusika.html" class="a3">Bidyo't Musika</a>
            <a class="a4">Tagalog</a>
        </div>

        <div class="d2">
            <br><br><a class="a2">Seksyon ng mga Komento</a><br><br><br>
        </div>

        <div class="container">
            <textarea id="comment"></textarea><br>
            <button id="addComments">Magkomento</button>
            <br><br><div id="allComments"></div>
        </div>

        <div class="d2">
            <br><br><a class="a2">Mga Bidyong May Pagkakahalintulad</a><br><br><br>
        </div>

        <div class="d3">
            <div>
                <a href="#"><img src="https://img.youtube.com/vi/_N970R-P7Qc/mqdefault.jpg" />Ensou - Singularity / GUMI</a>
            </div>
            <div>
                <a href="#"><img src="https://img.youtube.com/vi/y7cU07xe-3c/mqdefault.jpg" />Ensou - COMA / GUMI</a>
            </div>
            <div>
                <a href="#"><img src="https://img.youtube.com/vi/Sse9ctjAJTk/mqdefault.jpg" />Ensou - Time Traveler / GUMI</a>
            </div>
            <div>
                <a href="#"><img src="https://img.youtube.com/vi/1kBTec0WiI4/mqdefault.jpg" />Ensou - Entropy / Hatsune Miku</a>
            </div>
        </div>

        <div class="d2">
            <br><p>&copy; Karapatang-ari ng Bidyo sa <script>new Date().getFullYear()>2017&&document.write(""+new Date().getFullYear());</script>. Reserbado ang lahat ng karapatan.</p><br>
        </div>

    </div>
    <script>
        
        window.onload = function setTemplate() {
            document.getElementById('allComments').innerHTML = localStorage.getItem('template');
        };

        const commentContainer = document.getElementById('allComments');
        document.getElementById('addComments').addEventListener('click', function (ev) {
        addComment(ev);
        });

        function addComment(ev) {
            let commentText, wrapDiv;
            const textBox = document.createElement('div');
            const likeButton = document.createElement('button');
            likeButton.innerHTML = 'Makipagkamayan';
            likeButton.className = 'likeComment';
            const deleteButton = document.createElement('button');
            deleteButton.innerHTML = 'Burahin';
            deleteButton.className = 'deleteComment';
            if(hasClass(ev.target.parentElement, 'container')) {
                const wrapDiv = document.createElement('div');
                wrapDiv.className = 'wrapper';
                commentText = document.getElementById('comment').value;
                document.getElementById('comment').value = '';
                textBox.innerHTML = commentText;
                wrapDiv.append(textBox, likeButton, deleteButton);
                commentContainer.appendChild(wrapDiv);
            } else {
                wrapDiv = ev.target.parentElement;
                commentText = ev.target.parentElement.firstElementChild.value;
                textBox.innerHTML = commentText;
                wrapDiv.innerHTML = '';
                wrapDiv.append(textBox, likeButton, deleteButton);
            }
            setOnLocalStorage();
        }

        function setOnLocalStorage () {
            localStorage.setItem('template', document.getElementById('allComments').innerHTML);
        }
        function hasClass(elem, className) {
            return elem.className.split(' ').indexOf(className) > -1;
        }
        function hasClass(elem, className) {
            return elem.className.split(' ').indexOf(className) > -1;
        }
        document.getElementById('allComments').addEventListener('click', function (e) {
            if (hasClass(e.target, 'reply')) {
                const parentDiv = e.target.parentElement;
                const wrapDiv = document.createElement('div');
                wrapDiv.style.marginLeft = (Number.parseInt(parentDiv.style.marginLeft) + 15).toString() + 'px';
                wrapDiv.className = 'wrapper';
                const textArea = document.createElement('textarea');
                textArea.style.marginRight = '20px';
                const addButton = document.createElement('button');
                addButton.className = 'addReply';
                addButton.innerHTML = 'Add';
                const cancelButton = document.createElement('button');
                cancelButton.innerHTML = 'Cancel';
                cancelButton.className='cancelReply';
                wrapDiv.append(textArea, addButton, cancelButton);
                parentDiv.appendChild(wrapDiv);

            } else if(hasClass(e.target, 'addReply')) {
                addComment(e);
            } else if(hasClass(e.target, 'likeComment')) {
                const likeBtnValue = e.target.innerHTML;
                e.target.innerHTML = likeBtnValue !== 'Makipagkamayan' ? Number.parseInt(likeBtnValue) + 1 : 1;
                setOnLocalStorage();
            } else if(hasClass(e.target, 'cancelReply')) {
                e.target.parentElement.innerHTML = '';
                setOnLocalStorage();
            } else if(hasClass(e.target, 'deleteComment')) {
                e.target.parentElement.remove();
            }
        });
    </script>
</body>
</html>